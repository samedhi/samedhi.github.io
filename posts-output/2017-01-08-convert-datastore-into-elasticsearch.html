<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Unstructured: Convert Google Datastore into Elasticsearch</title>
    <link rel="canonical" href="https://read-line.com/posts-output/2017-01-08-convert-datastore-into-elasticsearch">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="//fonts.googleapis.com/css?family=Alegreya:400italic,700italic,400,700" rel="stylesheet"
          type="text/css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/default.min.css">
    <link href="/css/screen.css" rel="stylesheet" type="text/css" />
</head>
<body>


<nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Unstructured</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li ><a href="/">Home</a></li>
                <li
                ><a href="/archives">Archives</a></li>
                
                <li
                >
                <a href="/pages-output/about">About</a>
                </li>
                
                <li><a href="/feed.xml">RSS</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div><!--/.container-fluid -->
</nav>


<div class="container">


    <div class="row">
        <div class="col-lg-9">
            <div id="content">
                
<div id="post">
    <div class="post-header">
    <div id="post-meta" class="row">
        <div class="col-lg-6">January 8, 2017</div>
        
    </div>
    <h2>Convert Google Datastore into Elasticsearch</h2>
</div>
<div>
    
    <p>This week I wrote an addition to <a href='https://github.com/samedhi/gaend'>gaend</a> that automatically causes every <code>ndb.Model</code> entity to automagically be persisted to <a href='https://www.elastic.co/products/elasticsearch'>Elasticsearch</a>.</p><h2 id="why?">Why?</h2><p><a href='https://cloud.google.com/datastore/docs/concepts/overview'>Datastore</a> (the database technology that powers Google App Engine) has a number of great features.</p><ol><li>It scales to like forever</li><li>With GAE, you can do complex validation on every write</li><li>Automatically applied security, upgrades, scaling, partitioning, etc.</li><li>It is pretty simple</li></ol><p>Although datastore is perfect as a Key/Value store that allows transactions and limited queries, it does have its limitations.</p><ol><li>It does not allow SCAN</li><li>It does not allow JOIN</li></ol><p>One effect of these limits is that it can difficult to do things like aggregation on tables. You should use the proper tool for the desired outcome.</p><ul><li>Datastore is great as a key/value store (with transactions).</li><li>Elasticsearch is great at doing aggregation.</li></ul><p>Datastore is structured (typed) data. Everything that goes into Elasticsearch must be JSON data. Structured data can be fairly easily transformed into JSON data. You see where I am going with this?</p><h2 id="nuance">Nuance</h2><p>This extension to <a href='https://github.com/samedhi/gaend'>gaend</a> does successfully convert any Datastore data into Elasticsearch. You should look at your table in Datastore and perhaps consider whether you need to submit a custom <a href='https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html'>mapping</a> for Elasticsearch. If unspecified, Elasticsearch will generate a mapping for you based on the submitted JSON document. For tables made up of "primitive" data, the dynamically generated mapping is usually sufficient. Still, know that you can override the dynamic in the event that you have complex, deeply nested, or large types of data.</p>
</div>


    <div id="prev-next">
        
        <a href="/posts-output/2017-01-15-soft-scan-on-google-app-engine">&laquo; Soft Scan on Google App Engine</a>
        
        
        <a class="right" href="/posts-output/2017-01-02-gaend">Gaend &raquo;</a>
        
    </div>

    


</div>

            </div>
        </div>

        <div class="col-md-3">
            <div id="sidebar">
                <h3>Links</h3>
                <ul id="links">
                    <li><a href="http://cryogenweb.org/docs/home.html">Cryogen Docs</a></li>
                    <li><a href="http://carmenla.me/blog/archives">Carmen's Blog</a></li>
                    
                    <li><a href="/pages-output/another-page">Another Page</a></li>
                    
                </ul>
                
                <div id="recent">
                    <h3>Recent Posts</h3>
                    <ul>
                        
                        <li><a href="/posts-output/2019-04-13-Hellboy">Hellboy (2019)</a></li>
                        
                        <li><a href="/posts-output/2017-12-23-building-csv-in-clojure">Build a CSV in Clojure</a></li>
                        
                        <li><a href="/posts-output/2017-12-21-paginating-on-app-engine">Pagination on Google App Engine Standard</a></li>
                        
                    </ul>
                </div>
                
                
            </div>
        </div>
    </div>
    <footer>Copyright &copy; 2019 Stephen Cagle
        <p style="text-align: center;">Powered by <a href="http://cryogenweb.org">Cryogen</a></p></footer>
</div>
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="/js/highlight.pack.js" type="text/javascript"></script>
<script>hljs.initHighlightingOnLoad();</script>


</body>
</html>
